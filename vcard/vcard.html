<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:8080/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body data-new-gr-c-s-check-loaded="14.991.0" data-gr-ext-installed="">

<h2>VCard generator - Panorama firm</h2>

<label for="searchField">Search:</label>
<input type="text" id="searchField" name="searchField">

<button type="button" onclick="searchRequest()">Search</button>

<br>

<div id="demo1" class="collapse">
    <table class="table">
        <thead>
        <tr>
            <th>Name</th>
            <th>Telephone</th>
            <th>Email</th>
            <th>Url</th>
            <th>VCard</th>
        </tr>
        </thead>
        <tbody id="table_body">
        <tr><td>W.w. Nyka Sp.j.</td><td>58 3492308</td><td>wmnyka@gumed.edu.pl</td><td>http://walentynykaneurologgdansk.pl/</td><td><input type="button" value="download"></td></tr><tr><td>Toma Sp. z o.o. Przetwórstwo tworzyw sztucznych</td><td>44 7245043</td><td>biuro@pphtoma.pl</td><td>http://www.nzoz-toma.pl/</td><td><input type="button" value="download"></td></tr><tr><td>Jaros&#322;aw Groszko Indywidualna praktyka lekarska</td><td>32 2896403</td><td>jarg@mp.pl</td><td>http://www.groszko.pl</td><td><input type="button" value="download"></td></tr><tr><td>Hipokrates Centrum Medycyny Pracy</td><td>32 2192746</td><td>cmp@hipokrates.tychy.pl</td><td>http://www.hipokratescmp.pl</td><td><input type="button" value="download"></td></tr><tr><td>Medycyna Pracy Sp. z o.o. Zak&#322;ad Opieki Zdrowotnej</td><td>12 6466436</td><td>zoz1@op.pl</td><td>http://www.medycynapracy.krakow.pl</td><td><input type="button" value="download"></td></tr><tr><td>Dr n. med. Kalina &#321;api&#324;ska spec. otolaryngolog, spec. laryngologii dzieci&#281;cej</td><td>12 6443253</td><td>null</td><td>null</td><td><input type="button" value="download"></td></tr><tr><td>Medan Niepubliczny zak&#322;ad podstawowej i specjalistycznej opieki zdrowotnej</td><td>62 7472261</td><td>kandrzejczak@neostrada.pl</td><td>https://przychodniajarocin.pl/</td><td><input type="button" value="download"></td></tr><tr><td>Contenta. Gabinet lekarski. Czes&#322;awa Dukaczewska</td><td>22 7285562</td><td>contenta@contenta.pl</td><td>http://www.contenta.pl</td><td><input type="button" value="download"></td></tr><tr><td>Magdalena Szel&#261;gowska Pracownia analityczna</td><td>12 2762088</td><td>pracownia@pracownia-analityczna.pl</td><td>http://www.pracownia-analityczna.pl</td><td><input type="button" value="download"></td></tr><tr><td>Joanna Wac&#322;awik Medycyny pracy</td><td>606238294</td><td>gabinet@drwaclawik.pl</td><td>https://www.drwaclawik.pl</td><td><input type="button" value="download"></td></tr><tr><td>Wiktorowicz Wojciech, lek. med. ginekolog po&#322;o&#380;nik, cytolog</td><td>602118189</td><td>wiktorowiczwojciech@gmail.com</td><td>null</td><td><input type="button" value="download"></td></tr><tr><td>Artes NZOZ</td><td>65 5299287</td><td>null</td><td>http://www.artes.com.pl</td><td><input type="button" value="download"></td></tr><tr><td>Sanus. SZOZ. Poradnia laryngologiczna i foniatryczna</td><td>606642022</td><td>sanus.kalisz@gmail.com</td><td>null</td><td><input type="button" value="download"></td></tr><tr><td>Zdrowie-Legionowo. NZOZ. Przychodnia rodzinna</td><td>22 7742025</td><td>zdrowie@met.pl</td><td>https://www.zdrowie-legionowo.pl</td><td><input type="button" value="download"></td></tr><tr><td>Dr n. med. Kalina &#321;api&#324;ska spec. otolaryngolog, spec. laryngologii dzieci&#281;cej</td><td>12 6443253</td><td>null</td><td>null</td><td><input type="button" value="download"></td></tr><tr><td>Klinika Krakowska sp. z o.o.</td><td>12 6383818</td><td>dyrektor@klinika.krakow.pl</td><td>http://klinika.krakow.pl</td><td><input type="button" value="download"></td></tr><tr><td>Wojskowa Specjalistyczna Przychodnia Lekarska SPZOZ</td><td>94 3519671</td><td>szpital117@poczta.onet.pl</td><td>http://www.wspl.kolobrzeg.pl</td><td><input type="button" value="download"></td></tr><tr><td>Wojskowa Specjalistyczna Przychodnia Lekarska SPZOZ</td><td>94 3519671</td><td>szpital117@poczta.onet.pl</td><td>http://www.wspl.kolobrzeg.pl</td><td><input type="button" value="download"></td></tr><tr><td>Cz&#322;api&#324;ski Andrzej NZOZ Przychodnia Lekarska</td><td>43 8236130</td><td>awcz@neostrada.pl</td><td>null</td><td><input type="button" value="download"></td></tr><tr><td>O&#347;rodek Diagnostyczno - Leczniczy przy Górniczej Fundacji Ochrony Zdrowia</td><td>74 8424506</td><td>odl@fundacja.walbrzych.pl</td><td>https://www.fundacja.walbrzych.pl/</td><td><input type="button" value="download"></td></tr><tr><td>Medjana. Centrum medyczne</td><td>48 3633373</td><td>medjana@medjanaradom.pl</td><td>http://www.medjanaradom.pl</td><td><input type="button" value="download"></td></tr><tr><td>Katarzyna Michalak Praktyka Lekarska</td><td>502581852</td><td>michalak.k12@gmail.com</td><td>null</td><td><input type="button" value="download"></td></tr><tr><td>"Twój Lekarz" Poradnia Lekarza Rodzinnego</td><td>61 8703350</td><td>poradniagowarzewo@wp.pl</td><td>http://www.poradniatwojlekarz.pl</td><td><input type="button" value="download"></td></tr><tr><td>Gabinet Weterynaryjny Lek. Wet. Grzegorz Kaptur</td><td>727685723</td><td>grzegorz9007@o2.pl</td><td>null</td><td><input type="button" value="download"></td></tr><tr><td>Kwant Pracownia RTG i USG Specjalistyczne Gabinety Lekarskie</td><td>61 6511285</td><td>mmatuszewski.michal@gmail.com</td><td>https://www.kwant-lekarze.pl/</td><td><input type="button" value="download"></td></tr></tbody>
    </table>
</div>

<script>

function searchRequest() {

    let phraseToSearch = document.getElementById("searchField").value;

    let requestLoggedUser = new XMLHttpRequest()

    requestLoggedUser.open('GET', "http://localhost:8080/search/" + phraseToSearch, true)
    requestLoggedUser.onload = function () {

      let table_body = document.getElementById('table_body')
      let result = JSON.parse(this.response)

      for (let value in result) {
            if (result.hasOwnProperty(value)) {
                let tr = document.createElement("tr")

                let td1 = document.createElement("td")
                let textnode1 = document.createTextNode(result[value].formattedName)
                td1.appendChild(textnode1);

                let td2 = document.createElement("td")
                let textnode2 = document.createTextNode(result[value].telephoneNumber)
                td2.appendChild(textnode2)

                let td3 = document.createElement("td")
                let textnode3 = document.createTextNode(result[value].email)
                td3.appendChild(textnode3)

                let td4 = document.createElement("td")
                let textnode4 = document.createTextNode(result[value].url)
                td4.appendChild(textnode4)

                let td5 = document.createElement("td")

                let button_download = document.createElement("input");
                button_download.type = "button";
                button_download.value = "download";
                button_download.onclick = () => {
                    let downloadRequest = new XMLHttpRequest()
                    let phraseToSearch = document.getElementById("searchField").value;
                    downloadRequest.open('GET', "http://localhost:8080/vcard/" + phraseToSearch + "/" + result[value].formattedName , true)
                    downloadRequest.onload = function () {
                        downloadToFile(this.response, 'vcard.vcf', 'text/plain')
                    }
                    downloadRequest.send()
                };

                td5.appendChild(button_download)

                tr.appendChild(td1)
                tr.appendChild(td2)
                tr.appendChild(td3)
                tr.appendChild(td4)
                tr.appendChild(td5)
                table_body.appendChild(tr)
            }
       }
    }
    requestLoggedUser.send()

    const downloadToFile = (content, filename, contentType) => {
      const a = document.createElement('a');
      const file = new Blob([content], {type: contentType});

      a.href= URL.createObjectURL(file);
      a.download = filename;
      a.click();

        URL.revokeObjectURL(a.href);
    };
}

</script>


</body></html>